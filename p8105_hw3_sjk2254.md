p8105_hw3_sjk2254
================
Sharon Kulali

## SetUp

``` r
# loading the needed libraries

library(tidyverse)
library(p8105.datasets)
library(patchwork)
```

``` r
# setting visuals for plots

knitr::opts_chunk$set(
  fig.width = 6,
  fig.asp = .6,
  out.width = "90%"
)

theme_set(theme_minimal() + theme(legend.position = "bottom"))

options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis"
)

scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
```

## Problem 1

``` r
# loading the dataset

data("instacart")

# looking at the dataset

insta_df = instacart |> 
  as_tibble()
```

Instacart is an online grocery shopping service that allows individuals
to shop online from local stores. The platform offers same-day delivery
with purchases being able to be delivered within 2 hours. The `insta_df`
dataset contains the online grocery orders from Instacart users in 2017.
There are 15 variables with 1384617 observations. More specifically, the
dataset has information about identifiers for the order (`order_id`),
product (`product_id`), customer (`user_id`), aisle (`aisle_id`), and
department (`department_id`). Additionally, there is information about
the specific day (`order_dow`) and hour (`order_hour_of_day`) that the
orders were placed.

``` r
# examining the aisles

insta_df |> 
  group_by(aisle_id, aisle) |> 
  count() |> 
  arrange(desc(n))
```

    ## # A tibble: 134 × 3
    ## # Groups:   aisle_id, aisle [134]
    ##    aisle_id aisle                              n
    ##       <int> <chr>                          <int>
    ##  1       83 fresh vegetables              150609
    ##  2       24 fresh fruits                  150473
    ##  3      123 packaged vegetables fruits     78493
    ##  4      120 yogurt                         55240
    ##  5       21 packaged cheese                41699
    ##  6      115 water seltzer sparkling water  36617
    ##  7       84 milk                           32644
    ##  8      107 chips pretzels                 31269
    ##  9       91 soy lactosefree                26240
    ## 10      112 bread                          23635
    ## # ℹ 124 more rows

The table above shows the the aisles arranged in decreasing order by
most items. Overall, there are 134 different aisles with fresh
vegetables and fruits being the most ordered items.

``` r
# plotting the number of items ordered per aisle

insta_df |> 
  group_by(aisle) |> 
  count() |> 
  filter(n > 10000) |>
  mutate(aisle = fct_reorder(aisle, n)) |> 
  ggplot(aes(x = aisle, y = n)) +
  geom_point() +
  theme(axis.text.x = element_text(angle = 60, vjust = 1, hjust=1)) +
  ggtitle("Number of Items Ordered in Each Aisle") +
  theme(plot.title = element_text(hjust = 0.5))
```

<img src="p8105_hw3_sjk2254_files/figure-gfm/unnamed-chunk-5-1.png" width="90%" />

The plot above shows the number of items ordered in each aisle for
aisles with more than 10,000 items ordered. You can see that fresh
vegetables and fruits are the most ordered items because they have the
highest points.

``` r
insta_df |> 
  filter(aisle %in% c("baking ingredients","dog food care","packaged vegetables fruits")) |>  
  group_by(aisle) |> 
  count(product_name) |> 
  arrange(desc(n)) |> 
  top_n(n = 3) |> 
  knitr::kable()
```

| aisle                      | product_name                                  |    n |
|:---------------------------|:----------------------------------------------|-----:|
| packaged vegetables fruits | Organic Baby Spinach                          | 9784 |
| packaged vegetables fruits | Organic Raspberries                           | 5546 |
| packaged vegetables fruits | Organic Blueberries                           | 4966 |
| baking ingredients         | Light Brown Sugar                             |  499 |
| baking ingredients         | Pure Baking Soda                              |  387 |
| baking ingredients         | Cane Sugar                                    |  336 |
| dog food care              | Snack Sticks Chicken & Rice Recipe Dog Treats |   30 |
| dog food care              | Organix Chicken & Brown Rice Recipe           |   28 |
| dog food care              | Small Dog Biscuits                            |   26 |

The table above shows three most popular items in each of the aisles
baking ingredients, dog food care, and packaged vegetables fruits. You
can see that packaged vegetables fruits has the most orders out of the
three aisles.

``` r
insta_df |> 
  filter(product_name %in% c("Pink Lady Apples","Coffee Ice Cream")) |> 
  group_by(product_name, order_dow) |> 
  summarize(mean_hr = mean(order_hour_of_day)) |> 
  pivot_wider(
    names_from = order_dow,
    values_from = mean_hr) |> 
  knitr::kable()
```

| product_name     |        0 |        1 |        2 |        3 |        4 |        5 |        6 |
|:-----------------|---------:|---------:|---------:|---------:|---------:|---------:|---------:|
| Coffee Ice Cream | 13.77419 | 14.31579 | 15.38095 | 15.31818 | 15.21739 | 12.26316 | 13.83333 |
| Pink Lady Apples | 13.44118 | 11.36000 | 11.70213 | 14.25000 | 11.55172 | 12.78431 | 11.93750 |

The table above shows the mean hour of the day at which Pink Lady Apples
and Coffee Ice Cream are ordered on each day of the week. You can see
that on average, Coffee Ice Cream is ordered more than Pink Lady Apples.
